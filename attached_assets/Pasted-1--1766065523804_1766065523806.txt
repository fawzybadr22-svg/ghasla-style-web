1. نظرة عامة
الهدف: إنشاء حساب / لوحة خاصة بالمندوبين (مندوب الغسيل) لإدارة طلباتهم من لحظة استلام الطلب حتى إنهائه، مع تزامن الحالة في لوحة المشرف، السوبر أدمن، والعميل، وإضافة نقاط الولاء تلقائياً بعد الإغلاق.​

الدور الجديد: delegate أو driver (مندوب)، بصلاحيات محددة على الطلبات فقط وليس على إعدادات النظام.​

2. صلاحيات دور المندوب
عرض الطلبات المخصصة له والطلبات المتاحة ضمن نطاقه الجغرافي فقط.​

قبول / رفض الطلبات (يدويًا أو تلقائيًا).​

تحديث حالة الطلب عبر مراحل العمل (في الطريق، بدأ التنفيذ، مكتمل).​

الاطلاع على بيانات العميل الأساسية: الاسم، الهاتف، اللوكيشن على الخريطة، نوع السيارة، نوع الخدمة، ملاحظات إضافية.​

إغلاق الطلب مع إدخال أو تأكيد قيمة الفاتورة النهائية.​

3. واجهة المندوب – الشاشات الأساسية
3.1 شاشة الطلبات المتاحة
قائمة بالطلبات الجديدة في حالة Pending ضمن نطاق تغطية المندوب (حسب المنطقة أو نصف القطر الجغرافي).​

لكل طلب يظهر: رقم الطلب، منطقة العميل، نوع الخدمة، زمن الإنشاء، السعر التقديري.​

أزرار:

عرض التفاصيل

قبول

رفض

3.2 شاشة الطلبات الحالية
قائمة بالطلبات التي في حالة Assigned / In progress للمندوب الحالي.​

لكل طلب يظهر:

حالة العمل الحالية (في الطريق – قيد الغسيل – بانتظار الدفع – مكتمل).

وقت/تاريخ الموعد، العداد الزمني للتأخير.​

أزرار:

بدء التحرك / في الطريق للعميل

بدء التنفيذ

إنهاء الطلب

3.3 شاشة تفاصيل الطلب
معلومات كاملة:

بيانات العميل (اسم، هاتف).

اللوكيشن: خريطة + زر “فتح في Google Maps”.​

نوع الخدمة، السيارة، أي إضافات.

السعر التقديري والخصم (إن وجد).

بعد قبول الطلب:

يظهر خط زمني (Timeline) لحالات الطلب مع أزرار تغيير الحالة.​

3.4 شاشة الملخص اليومي/الشهري للمندوب
إحصائيات:

عدد الطلبات المنجزة اليوم/الأسبوع/الشهر.

إجمالي قيمة الفواتير، وعمولة المندوب.​

متوسط تقييم العملاء للمندوب (إن وُجد نظام تقييم).​

4. ميزة القبول التلقائي للطلبات
إعداد في بروفايل المندوب: Toggle باسم “القبول التلقائي للطلبات”.​

4.1 عند التفعيل
أي طلب جديد ضمن نطاق المندوب يتحقق له الشرط (مثلاً لا يتجاوز عدد طلباته المفتوحة حد معين) يتم:

تعيينه مباشرة للمندوب.

تغيير الحالة من Pending إلى Accepted / Assigned.​

إرسال إشعار للمندوب بأن طلبًا جديدًا تم قبوله تلقائيًا.

4.2 عند الإيقاف
الطلبات الجديدة تظهر في شاشة “الطلبات المتاحة” مع إشعار، ويجب على المندوب الضغط على زر قبول يدويًا.​

5. دورة حياة الطلب (Workflow)
5.1 من طرف العميل
العميل ينشئ الطلب من التطبيق/الموقع.

حالة الطلب = New / Pending.​

5.2 من طرف المندوب
قبول الطلب (يدوي أو تلقائي):

تعيين المندوب في حقل assignedDelegateId.

الحالة عند الجميع: Accepted / Assigned.​

في الطريق للعميل:

المندوب يضغط “في الطريق”.

تحديث الحالة إلى On the way.

يمكن تفعيل تتبع حي لموقع المندوب يظهر للمشرف والعميل.​

بدء التنفيذ:

عند الوصول لموقع العميل يضغط “بدء الغسيل”.

الحالة = In progress.

إنهاء الطلب:

المندوب يدخل أو يؤكد المبلغ النهائي، ويضيف صور “قبل/بعد” أو ملاحظة إن لزم.​

يختار طريقة الدفع (تم الدفع نقدًا / أونلاين).

الحالة = Completed.

5.3 التزامن مع بقية اللوحات
لوحة المشرف والسوبر أدمن:

ترى نفس الحالات في الوقت الفعلي مع اسم المندوب وموقعه الحالي (لو متاح).​

لوحة العميل:

تظهر له رسالة حالة مطابقة للواقع (في الطريق، بدأ الغسيل، الطلب مكتمل).​

6. الفواتير ونقاط الولاء
عند إغلاق الطلب بحالة Completed:

ينشأ/يتحدث سجل فاتورة مرتبط بالطلب والمندوب والعميل.​

يتم احتساب نقاط الولاء:

مثال: 1 نقطة لكل 1 دينار مدفوع، أو حسب معادلة يتفق عليها.​

تُضاف النقاط مباشرة إلى حساب العميل وتظهر في لوحة العميل والسوبر أدمن.​

تُسجل قيمة الطلب في إحصائيات المندوب (الملخص اليومي).​

7. ميزات إضافية مقترحة لحساب المندوب
إثبات إنجاز العمل:

رفع صور قبل/بعد.

توقيع العميل على شاشة المندوب.

أو تأكيد عبر OTP SMS قبل الإغلاق النهائي.​

تنبيهات ذكية:

تنبيه للمندوب إذا اقترب من التأخير عن موعد الطلب.

تنبيه للمشرف إذا بقي الطلب في حالة معينة وقت أطول من المتوقع.​

تحسين المسار (لاحقاً):

في حال وجود أكثر من طلب، عرض Route محسّنة لزيارتها بالترتيب الأمثل.​

وضع عدم الإزعاج:

المندوب يستطيع إيقاف استقبال طلبات جديدة لفترة (استراحة/انشغال)، يتم استبعاده مؤقتاً من التعيين التلقائي